{% extends "specialist/base_specialist.html" %}
{% load static %}

{% block specialist_css %}
<link rel="stylesheet" href="{% static 'css/treatment_patients.css' %}">
{% endblock %}

{% block specialist_content %}

<div class="patients-wrapper">

    <h1 class="page-title">الخطط العلاجية</h1>

    {% if patient_plans %}
    <table class="patients-table">
        <thead>
            <tr>
                <th>اسم المريض</th>
                <th>رقم الملف</th>
                <th>حالة الخطة</th>
                <th>الإجراء</th>
            </tr>
        </thead>

        <tbody>
            {% for item in patient_plans %}
            <tr>

                <td data-label="اسم المريض">
                    {{ item.patient.user.get_full_name }}
                </td>

                <td data-label="رقم الملف">
                    {{ item.patient.file_number }}
                </td>

                <td data-label="حالة الخطة">
                    <span class="plan-status {{ item.plan.status|lower }}">
                        {{ item.plan.get_status_display }}
                    </span>
                </td>

                <td data-label="الإجراء">
                    <a href="{% url 'treatment:treatment_plan_detail' item.plan.id %}"
                       class="details-btn">
                        عرض الخطة
                    </a>
                </td>

            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% else %}
        <div class="empty-state">
            <p>لا يوجد مرضى مرتبطين بك حالياً</p>
        </div>
    {% endif %}

</div>

{% endblock %}
