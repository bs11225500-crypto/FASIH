{% extends "main/base.html" %}
{% load static %}

{% block title %}تفاصيل الجلسة{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/session_detail.css' %}">
{% endblock %}

{% block content %}

<div class="session-detail-container">

  <div class="page-header">
    <h2>تفاصيل الجلسة</h2>
    <p class="page-subtitle">معلومات الجلسة وحالتها الحالية</p>
  </div>

  <div class="session-card">

    <div class="session-row">
      <span class="label">نوع الجلسة</span>
      <span class="value">{{ session.get_session_type_display }}</span>
    </div>

    <div class="session-row">
      <span class="label">تاريخ الجلسة</span>
      <span class="value">{{ session.start_time|date:"Y-m-d" }}</span>
    </div>

    <div class="session-row">
      <span class="label">وقت البداية</span>
      <span class="value">{{ session.start_time|time:"H:i" }}</span>
    </div>

    <div class="session-row">
      <span class="label">وقت النهاية</span>
      <span class="value">{{ session.end_time|time:"H:i" }}</span>
    </div>

    <div class="session-row">
      <span class="label">حالة الجلسة</span>

      {% if session.status == "COMPLETED" %}
        <span class="status-badge completed">✔ منتهية</span>

      {% elif session.status == "CONFIRMED" %}
        <span class="status-badge confirmed">⏳ مؤكدة</span>

      {% elif session.status == "PROPOSED" %}
        <span class="status-badge proposed">⌛ بانتظار التأكيد</span>

      {% else %}
        <span class="status-badge">
          {{ session.get_status_display }}
        </span>
      {% endif %}
    </div>

  </div>

  <div class="session-actions">

    {% if can_join %}
      <a href="{% url 'session:join_session' session.id %}"
         class="btn-primary">
        ▶ بدء الجلسة
      </a>
    {% endif %}

    {% if session.status == "COMPLETED" and user.specialist %}

      {% if session.note %}
        <a href="{% url 'session:session_note_detail' session.id %}"
           class="btn-primary">
          عرض ملاحظات الجلسة
        </a>
      {% else %}
        <a href="{% url 'session:add_session_note' session.id %}"
           class="btn-primary">
          إضافة ملاحظة الجلسة
        </a>
      {% endif %}

    {% endif %}

  </div>

</div>

{% endblock %}
