<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>{{ session.title }} | فصيح</title>

    <!-- Jitsi API -->
    <script src="https://meet.jit.si/external_api.js"></script>

    <!-- خط -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 0;
            font-family: 'Cairo', sans-serif;
            background: #f4f7fb;
        }

        .session-header {
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #3A7BD5, #7ED6A7);
            color: #fff;
            font-weight: 600;
            font-size: 16px;
        }

        #meet {
            width: 100%;
            height: calc(100vh - 56px);
        }
    </style>
</head>
<body>

<div class="session-header">
    {{ session.title }} – جلسة نطق عبر فصيح
</div>

<div id="meet"></div>
<script>
  window.onload = function () {

    if (typeof JitsiMeetExternalAPI === "undefined") {
      alert("Jitsi API لم يتم تحميله");
      return;
    }

    const domain = "meet.jit.si";

    const options = {
      roomName: "{{ session.room_name }}",
      parentNode: document.getElementById("meet"),
      width: "100%",
      height: "100%",

      userInfo: {
        displayName: "{{ request.user.get_full_name|default:'مستخدم' }}"
      },

      configOverwrite: {
        prejoinPageEnabled: false,
        enableLobby: false,
        disableInviteFunctions: true,
        startWithAudioMuted: false,
        startWithVideoMuted: false,
        requireDisplayName: false,
      },

      interfaceConfigOverwrite: {
        DISABLE_JOIN_LEAVE_NOTIFICATIONS: true,
        SHOW_JITSI_WATERMARK: false,
        SHOW_WATERMARK_FOR_GUESTS: false,
        SHOW_BRAND_WATERMARK: false,
      }
    };

    const api = new JitsiMeetExternalAPI(domain, options);

    // منع شاشة تسجيل الدخول
    api.addEventListener('videoConferenceJoined', () => {
      console.log("تم الدخول بنجاح");
    });

  };
</script>



</body>
</html>
